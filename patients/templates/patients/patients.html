{% extends 'base.html' %}
{% load static %}
{% block style %}
    <link rel="stylesheet" href="{% static 'css/patients.css' %}">
{% endblock %}
{% block title %}
    <title>Пациенты</title>
{% endblock %}
{% block content %}
    <div class="container">
        <div class="content__container">
            <h1 class="search__patient">Выберите пациента</h1>
            <div class="content__main">
                <ul class="object__tools">
                    <li>
                        <a href="" class="AddLink">
                            <span class="Add">Добавить пользователя</span>
                            <span class="Plus">
                            <svg width="13" height="13" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg">
                            <path fill="#ffffff"
                                  d="M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"></path>
                            </svg>
                        </span>
                        </a>
                    </li>
                </ul>
                <div class="module" id="changelist">
                    <div class="changelist__form">
                        <div class="toolbar">
                            <form method="get" id="changelist__search">
                                <div class="search__item">
                                    <label for="searchbar">
                                        <img src="{% static 'img/search.svg' %}" alt="Search">
                                    </label>
                                    <input type="text" size="40" name="q" value="{{ request.GET.q }}" id="searchbar" autofocus>
                                    <input type="submit" value="Найти">
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="table">
                        <div class="row table__header">
                            <div class="cell" id="header1">ФИО</div>
                            <div class="cell" id="header2">Номер телефона</div>
                            <div class="cell" id="header3">Дата рождения</div>
                            <div class="cell" id="header4">Адрес проживания</div>
                            <div class="cell" id="header5">Дата Регистрации</div>
                        </div>
                        {% for patient in patients %}
                            <div class="row">
                                <div class="cell"
                                     data-title="FIO">{{ patient.Name }} {{ patient.Patronymic }} {{ patient.Surname }}</div>
                                <div class="cell" data-title="Phone">{{ patient.Telephone }}</div>
                                <div class="cell" data-title="Date of Birth">{{ patient.Date_of_birth }}</div>
                                <div class="cell" data-title="Address">{{ patient.Place_of_residence }}</div>
                                <div class="cell"
                                     data-title="Date of Registration">{{ patient.Date_of_Registration }}</div>
                            </div>
                        {% endfor %}
                    </div>
                    {% if is_paginated %}
                        <div class="pagination">
                            <ul>
                                {% if page_obj.has_previous %}
                                    <li>
                                        <a href="{% url 'patients' %}?page={{ page_obj.previous_page_number }}">Previous</a>
                                    </li>
                                {% endif %}
                                {% for f in page_obj.paginator.page_range %}
                                    {% if f == page_obj.number %}
                                        <li><a class="is-active" href="{% url 'patients' %}?page={{ f }}">{{ f }}</a>
                                        </li>
                                    {% else %}
                                        <li><a href="{% url 'patients' %}?page={{ f }}">{{ f }}</a></li>
                                    {% endif %}
                                {% endfor %}

                                {% if page_obj.has_next %}
                                    <li><a href="{% url 'patients' %}?page={{ page_obj.next_page_number }}">Next</a>
                                    </li>
                                {% endif %}
                            </ul>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block script %}
    <script src="{% static 'js/patients.js' %}"></script>
{% endblock %}